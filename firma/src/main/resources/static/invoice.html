<div ng-controller='invoice' class="container">
    <ul class="nav nav-tabs">
        <li><a data-toggle="tab" data-target="#kreiraneFakture"> Kreirane </a></li>
        <li><a data-toggle="tab" data-target="#poslateFakture"> Poslate </a> </li>
        <li><a data-toggle="tab" data-target="#primljeneFakture"> Primljene </a></li>
    </ul>

    <div class="tab-content">
        <div id="kreiraneFakture" class="tab-pane fade is active">
            <br/>
            <!--
            <table class="table table-bordered" ng-if="!invoiceFormShow">
                <thead>
                    <tr>
                        <th>Br. Rac</th>
                        <th>Kupac</th>
                        <th>Adresa</th>
                        <th>Datum</th>
                        <th>Iznos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="invoice in invoices | orderBy invoice.brRacna" ng-click="details(invoice)">
                        <th>invoice.brRacuna</th>
                        <th>invoice.kupac</th>
                        <th>invoice.adresa</th>
                        <th>invoice.datum</th>
                        <th>invoice.iznos</th>
                    </tr>
                </tbody>
            </table>
            -->

            <div ng-if="invoiceFormShow">

                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="idPoruke">ID Poruke: </label>
                        <div class="col-sm-4">
                             <input class="form-control" id="idPoruke" type="text" maxlength="50" ng-model="invoice.idPoruke"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="dobavljac">Naziv Dobavljaca: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="dobavljac" type="text" maxlength="255" ng-model="invoice.nazivDobavljaca"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="adresaDobavljaca">Adresa Dobavljaca: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="adresaDobavljaca" type="text" maxlength="255" ng-model="invoice.adresaDobavljaca"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="pibDobavljaca">PIB Dobavljaca: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="pibDobavljaca" type="text" maxlength="11" ng-model="invoice.pibDobavljaca"/>
                        </div>
                    </div>

                    <hr/>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="kupac">Naziv Kupca: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="kupac" type="text" maxlength="55" ng-model="invoice.nazivKupca"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="adresaKupca">Adresa Kupca: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="adresaKupca" type="text" maxlength="55" ng-model="invoice.adresaKupca"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="pibKupca">PIB Kupca: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="pibKupca" type="text" maxlength="11" ng-model="invoice.pibKupca"/>
                        </div>
                    </div>

                    <hr/>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="brojRacuna">Broj Racuna: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="brojRacuna" type="number" max="999999" ng-model="invoice.brojRacuna"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="datumRacuna">Datum Racuna: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="datumRacuna" type="date" ng-model="invoice.datumRacuna"/>
                        </div>
                    </div>

                    <hr/>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="vrednostRobe">Vrednost Robe: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="vrednostRobe" type="number" step="0.01" max="999999999999999" ng-model="invoice.vrednostRobe"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="vrednostUsluga">Vrednost Usluga: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="vrednostUsluga" type="number" step="0.01" max="999999999999999" ng-model="invoice.vrednostUsluga"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="robaIUsluga">Roba i Usluga: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="robaIUsluga" type="number" step="0.01" max="999999999999999" ng-model="invoice.ukupnoRobaUsluga"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="rabat">Ukupan Rabat: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="rabat" type="number" step="0.01" max="999999999999999" ng-model="invoice.ukupanRabat"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="porez">Ukupan Porez: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="porez" type="number" step="0.01" max="999999999999999" ng-model="invoice.ukupanPorez"/>
                        </div>
                    </div>

                    <hr/>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="oznakaValute">Oznaka Valute: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="oznakaValute" type="text" maxlength="3" ng-model="invoice.oznakaValute"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="zaUplatu">Za Uplatu: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="zaUplatu" type="number" step="0.01" max="999999999999999" ng-model="invoice.iznosZaUplatu"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="uplataNaRacun">Uplata Na Racun: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="uplataNaRacun" type="text" maxlength="18" ng-model="invoice.uplataNaRacuna"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="datumValute">Datum Valute: </label>
                        <div class="col-sm-4">
                            <input class="form-control" id="datumValute" type="date" ng-model="invoice.datumValute"/>
                        </div>
                    </div>

                </form>
                <hr/>
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>Rbr.</th>
                        <th>Naziv</th>
                        <th>Kolicina</th>
                        <th>Jedinicna Cena</th>
                        <th>Obrisi</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in invoice.items | orderBy: item.redniBroj">
                        <th>{{item.redniBroj}}</th>
                        <th>{{item.nazivRobeUsluge}}</th>
                        <th>{{item.kolicina}}</th>
                        <th>{{item.jedinicnaCena}}</th>
                        <th><button type="button" class="btn btn-sm btn-danger" ng-click="deleteItem(item)">Obrisi</button></th>
                    </tr>
                    </tbody>
                </table>
                <button type="button" class="btn btn-sm btn-info" data-toggle="modal" data-target="#newInvoiceItemModal">Dodaj Stavku</button>
                <button type="button" class="btn btn-sm btn-success" ng-click="saveInvoice()">Sacuvaj</button>


            </div>
            <br/>
            <button type="button" class="btn btn-sm btn-primary"  ng-click="showInvoiceForm(!invoiceFormShow)"> {{invoiceCreateButton}} </button>

        </div>

        <div id="poslateFakture" class="tab-pane fade" ng-click="getPoslati()">

            <!--
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Br. Rac</th>
                        <th>Kupac</th>
                        <th>Adresa</th>
                        <th>Datum</th>
                        <th>Iznos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="invoice in sentInvoices | orderBy invoice.brRacna" ng-click="details(invoice)">
                        <th>invoice.brRacuna</th>
                        <th>invoice.kupac</th>
                        <th>invoice.adresa</th>
                        <th>invoice.datum</th>
                        <th>invoice.iznos</th>
                    </tr>
                </tbody>
            </table>
            -->


        </div>

        <div id="primljeneFakture" class="tab-pane fade" ng-click="getPrimljeni()">

            <!--
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Br. Rac</th>
                        <th>Kupac</th>
                        <th>Adresa</th>
                        <th>Datum</th>
                        <th>Iznos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="invoice in receivedInvoices | orderBy invoice.brRacna" ng-click="details(invoice)">
                        <th>invoice.brRacuna</th>
                        <th>invoice.kupac</th>
                        <th>invoice.adresa</th>
                        <th>invoice.datum</th>
                        <th>invoice.iznos</th>
                    </tr>
                </tbody>
            </table>
            -->

        </div>

    </div>

    <!-- NEW INVOICE MODAL -->

    <div class="modal fade" id="newInvoiceItemModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title"> Kreiraj novu stavku fakture </h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal">

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="redniBroj">Redni Broj: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="redniBroj" type="number" max="999" ng-model="item.redniBroj"/>
                            </div>
                        </div>

                        <hr/>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="naziv">Naziv: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="naziv" type="text" maxlength="120" ng-model="item.nazivRobeUsluge"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="kolicina">Kolicina: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="kolicina" type="number" step="0.01" max="9999999999" ng-model="item.kolicina"/>
                            </div>
                        </div>

                        <hr/>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="mera">Jedinica Mere: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="mera" type="text" maxlength="6" ng-model="item.jedinicaMere"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="cena">Jedinicna Cena: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="cena" type="number" step="0.01" max="9999999999" ng-model="item.jedinicnaCena"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="vrednost">Vrednost: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="vrednost" type="number" step="0.01" max="999999999999" ng-model="item.vrednost"/>
                            </div>
                        </div>

                        <hr/>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="procenatRabat">Procenat Rabat: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="procenatRabat" type="number" step="0.01" max="99999" ng-model="item.procenatRabata"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="iznosRabat">Iznos Rabat: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="iznosRabat" type="number" step="0.01" max="999999999999" ng-model="item.iznosRabata"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="umanjenoRabat">Umanjeno Za Rabat: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="umanjenoRabat" type="number" step="0.01" max="999999999999" ng-model="item.umanjenoZaRabat"/>
                            </div>
                        </div>

                        <hr/>

                        <div class="form-group">
                            <label class="control-label col-sm-4" for="ukupanPorez">Ukupan Porez: </label>
                            <div class="col-sm-5">
                                <input class="form-control" id="ukupanPorez" type="number" step="0.01" max="999999999999" ng-model="item.ukupanPorez"/>
                            </div>
                        </div>



                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-sm btn-success" ng-click="addItem()" data-dismiss="modal">Save changes</button>
                </div>
            </div>
        </div>

    </div>




</div>